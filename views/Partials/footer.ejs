<footer>
  <script>
    // Variable to store the currently open modal
    var currentModal = null;
    var form = document.getElementById('authForm');


    function toggleModal(modalId, event) {
      // If a modal is currently open, close it
      if (currentModal) {
        currentModal.style.display = "none";
      }

      // Open the new modal
      currentModal = document.getElementById(modalId);
      currentModal.style.display = "block";

      // Get the position of the button
      var button = event.target;
      var rect = button.getBoundingClientRect();

      // Account for the border
      var border = parseInt(getComputedStyle(button).borderWidth);

      // Calculate the bottom of the button, accounting for the border
      var buttonBottom = rect.bottom - border;

      // Position the modal below the button
      currentModal.style.top = (buttonBottom + window.scrollY) + "px";

      // Center the modal horizontally
      currentModal.style.left = '50%';
      currentModal.style.transform = 'translateX(-50%)';
      // If the modal extends off the right edge of the screen, move it back
      var modalRight = currentModal.offsetLeft + currentModal.offsetWidth;
      if (modalRight > window.innerWidth) {
        currentModal.style.left = (window.innerWidth - currentModal.offsetWidth) + "px";
      }

      // Calculate the bottom of the button, accounting for the border
      var buttonBottom = rect.bottom - border;

      // Position the modal below the button
      currentModal.style.top = (buttonBottom + window.scrollY) + "px";

      // Slide the modal down to its final position below the button
      var finalTop = buttonBottom + window.scrollY;
      var currentTop = rect.top + window.scrollY;
      var intervalId = setInterval(function () {
        if (currentTop < finalTop) {
          currentTop++;
          currentModal.style.top = currentTop + "px";
        } else {
          clearInterval(intervalId);
        }
      }, 5); // Adjust this value to change the speed of the animation
    }

    function closeAllModals() {
      var modals = document.getElementsByClassName('modal');
      for (var i = 0; i < modals.length; i++) {
        modals[i].style.display = 'none';
      }
      // Reset the currently open modal
      currentModal = null;
    }

    var isSignupMode = true;
    var isLoggedIn = false; //track the login status

    function switchMode() {
      var submitButton = document.getElementById('submit');
      var switchButton = document.getElementById('switchMode');

      if (isSignupMode) {
        // Switch to login mode
        submitButton.value = "Login";
        switchButton.textContent = "Switch to Sign Up";
      } else {
        // Switch to signup mode
        submitButton.value = "Sign Up";
        switchButton.textContent = "Switch to Login";
      }

      isSignupMode = !isSignupMode;
    }

    form.addEventListener('submit', function (event) {
      event.preventDefault(); // This will prevent the form from being submitted
      closeAllModals(); // close the modal
      isLoggedIn = true; // Set isLoggedIn to true after successful login/signup
      // function to be executed elsewhere here
    });

    function toggleModal(modalId, event) {
      if (isLoggedIn) {
        // If the user is logged in, show the events on the map
        showFollowedEventsOnMap();
      } else {
        // If the user is not logged in, open the modal
        var modal = document.getElementById(modalId);
        modal.style.display = "block";
      }
    }

    function showFollowedEventsOnMap() {
      //open up the information on the events that have the followed status which is linked to the user.
      console.log("showFollowedEventsOnMap function called");
      var randomColor = '#' + Math.floor(Math.random() * 16777215).toString(16);
      document.documentElement.style.setProperty('--clr-dark', randomColor);// sets random bg colour for now to test
    }


    function moveCrosshair() {
      // Get the crosshair div
      var crosshair = document.querySelector('.crosshair');

      // Get the size of .map-div
      var mapDiv = document.querySelector('.map-div');
      var mapDivWidth = mapDiv.offsetWidth;
      var mapDivHeight = mapDiv.offsetHeight;

      // Get the height of the navbar
      var navbarHeight = document.querySelector('.nav-bar').offsetHeight;

      // Generate random coordinates within .map-div, below the navbar
      var randomX = Math.floor(Math.random() * mapDivWidth);
      var randomY = Math.floor(Math.random() * (mapDivHeight - navbarHeight) + navbarHeight);

      // Position the crosshair at the random coordinates
      crosshair.style.left = randomX + 'px';
      crosshair.style.top = randomY + 'px';

      // Make the crosshair visible
      crosshair.style.visibility = 'visible';
    }

  </script>

</footer>