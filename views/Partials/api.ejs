<script>
     //start of davids code

     const test = document.getElementById('loadAPI');

     function queryFetch(query, variables) {
     const token = "cvdgj137jq4nejecgnh6ce0chr"; // Your Meetup API token
     
     return fetch('https://api.meetup.com/gql', {
         method: 'POST',
         headers: {
             'Content-Type': 'application/json',
             'Authorization': 'Bearer {cvdgj137jq4nejecgnh6ce0chr}' // Authorization header format
         },
         body: JSON.stringify({
             query: query,
             variables: variables
         })
     })
     .then(res => {
        console.log("request was a success!");
        return res.json();
     })
     .catch(error => {
         console.error('Request has failed: :'+ error);
     });
 }
 function testQuery(test) {
 return queryFetch(`
     query {
         event(id: "276754274") {
             title
             description
             dateTime
         }
     }
 `, {event: test}).then(data => {
     console.log(data.data.event);
   });
 }

 async function fetchJSON(request){
    try{
      const response = await fetch(request);
      const contentType = response.headers.get("content-type");
      if (!contentType || !contentType.includes("application/json")) 
      {
        throw new TypeError("There is no JSON to load");
        
      }
      const jsonData = await response.json();
    } catch(error){
      console.log("Error: ", error);
    }
  }



</script>